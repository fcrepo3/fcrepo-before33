<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang=
"en-US">
<head>
  <meta name="generator" content=
  "HTML Tidy for Solaris (vers 1st January 2004), see www.w3.org" />

  <title>Fedora Installation and Configuration Guide</title>
  <link rel="stylesheet" type="text/css" href="../docstyle.css" />
</head>

<body>
  <div id="header">
    <a href="../index.html" id="logo"></a>

    <div id="title">
      <h1>Fedora Installation and Configuration Guide</h1>

      <h2>Fedora Release 2.0</h2>
    </div>
  </div>

  <div class="toc">
    <p><b>Table of Contents</b></p>

    <dl>
      <dt><a href="#d0e48">Getting Started</a></dt>

      <dt><a href="#d0e185">Compiling a Source
      Distribution</a></dt>

      <dt><a href="#d0e207">Setting up the Server</a></dt>

      <dt><a href="#d0e613">Running the Server</a></dt>

      <dt><a href="#d0e683">Configuring Fedora to Run on a
      Different Host or Port</a></dt>

      <dt><a href="#d0e801">Server logs</a></dt>

      <dt><a href="#d0e806">Where From Here?</a></dt>
    </dl>
  </div>

  <div class="section">
    <div class="titlepage">
      <div>
        <h2 class="title" style="clear: both"><a name="d0e48" id=
        "d0e48"></a>Getting Started</h2>
      </div>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e51" id="d0e51"></a>About
          This Guide</h3>
        </div>
      </div>

      <p>This is the installation guide for Fedora. It includes
      instructions for installing the server and client
      distributions, as well as instructions for installing and
      compiling the complete source code distribution.</p>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e56" id="d0e56"></a>Install
          Prerequisite Software</h3>
        </div>
      </div>

      <p>Required:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p><span class="emphasis"><em>Sun's Java Software
            Development Kit, v1.4.</em></span> Whether you are
            installing a binary or source distribution, you must
            have the J2SDK v1.4 or above. It should be installed on
            the machine you intend to use as the Fedora server. You
            can download it at <a href="http://java.sun.com/"
            target="_top">http://java.sun.com/</a></p>
          </li>
        </ul>
      </div>

      <p>Optional:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p><span class="emphasis"><em>MySQL, v3.23.x, MySQL
            4.x, or Oracle 9i</em></span> The Fedora server is
            backed in part by a relational database. If you decide
            not to use the included pure java database, McKoi v0.94
            (more about that later), you should download and
            install one of the known, working databases for your
            platform (or see the "Other Databases" section below).
            You can download MySQL at <a href=
            "http://www.mysql.com/" target=
            "_top">http://www.mysql.com/</a>. (Please note that
            issues have been reported when using older versions of
            the Windows implementation of MySQL v3.23.53 - v3.23.58
            with Fedora. For running under Windows, we recommend
            using the current production version of MySQL for
            Windows. <!--For more information on using earlier versions
            of MySQL, please see <a href=
            "http://www.fedora.info/wiki/bin/view/Fedora/PoolWasntFoundMessage"
               target="_top">this page on the Fedora wiki.</a>-->)</p>
          </li>
        </ul>
      </div>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e86" id="d0e86"></a>Download
          Fedora</h3>
        </div>
      </div>

      <p>The latest version of the software can always be found at
      <a href="http://www.fedora.info/release/" target=
      "_top">http://www.fedora.info/release/</a></p>

      <p>There are multiple distribution packages in a release. The
      server binaries, the client binaries, and the entire source
      code. Each of these packages is distributed in .tar.gz (for
      Unix) and .zip (for Windows) archives.</p>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e96" id="d0e96"></a>Unpack
          Fedora</h3>
        </div>
      </div>

      <p>Server binary distribution:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p>Decide where you want the Fedora software to reside.
            For example, C:\ or /usr/local.</p>
          </li>

          <li>
            <p>Unpack the archive in that directory. It will create
            its own directory, named according to the version...
            like fedora-2.0. This will be the home directory of
            Fedora.</p>
          </li>

          <li>
            <p>If you're in Unix, you must change the permissions
            of the files in the server/bin directory so that you
            can execute them. For instance, if you installed in
            /usr/local, this can be done with the command
            <span class="emphasis"><em>chmod 755
            /usr/local/fedora-2.0/server/bin/*</em></span></p>
          </li>
        </ul>
      </div>

      <p>Client binary distribution:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p>If a server is already unpacked on the machine, put
            the client in the same place. That is, if your server
            is unpacked into C:\fedora-2.0\server\, go to C:\ and
            unpack the client from there. It will go into
            C:\fedora-2.0\client, so that now both the client and
            server are under one common directory.</p>
          </li>

          <li>
            <p>If the machine you're installing on doesn't have a
            server, decide where you want the client to reside. For
            example, C:\ or /usr/local. Then unpack the archive in
            that directory. It will create its own directory, named
            according to the version... like fedora-2.0. This will
            be the home directory of Fedora.</p>
          </li>

          <li>
            <p>If you're in Unix, you must change the permissions
            of the files in the client/bin directory so that you
            can execute them. For instance, if you installed in
            /usr/local, this can be done with the command
            <span class="emphasis"><em>chmod 755
            /usr/local/fedora-2.0/client/bin/*</em></span></p>
          </li>
        </ul>
      </div>

      <p>Source Code:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p>Decide where you want to work with the source code
            and unpack it there. It will create its own directory,
            named according to the version... like fedora-2.0-src.
            This will be your Fedora development directory.</p>
          </li>
        </ul>
      </div>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e135" id=
          "d0e135"></a>Prepare Environment Variables</h3>
        </div>
      </div>

      <p>For server, client, and source code installations:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p>JAVA_HOME must point to the base directory of your
            J2SDK installation. On Windows, this will usually be
            something like C:\j2sdk1.4.x\. On Unix, it could be in
            several places. The /usr and /usr/local directory are
            commonly used for Java installations.</p>

            <blockquote class="blockquote">
              <p><span class="emphasis"><em>Note for server and
              client installations: If you would rather not set
              your JAVA_HOME to point to the version required by
              Fedora (for instance, if you run other applications
              using java1.3) you can instead set the
              FEDORA_JAVA_HOME environment variable. This way,
              Fedora's java installation won't conflict with your
              other java applications.</em></span></p>

              <p>Note for source installations: JAVA_HOME must be
              set to the values stated above, since ant requires
              this environment variable.</p>
            </blockquote>
          </li>

          <li>
            <p>PATH must contain the executable (bin) directory of
            the J2SDK installation. This is usally just under
            JAVA_HOME.</p>
          </li>
        </ul>
      </div>

      <p>For server and client installations:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p>FEDORA_HOME must point to the base directory of your
            Fedora installation. You will choose this directory
            when you unpack a binary distribution.</p>
          </li>
        </ul>
      </div>

      <p>For server installations:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p>PATH must contain the executable directory of the
            Fedora server software installation. This will be
            $FEDORA_HOME/server/bin on Unix, or
            %FEDORA_HOME%\server\bin in Windows.</p>
          </li>
        </ul>
      </div>

      <p>For client installations:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p>PATH must contain the executable directory of the
            Fedora client software installation. This will be
            $FEDORA_HOME/client/bin on Unix, or
            %FEDORA_HOME%\client\bin in Windows.</p>
          </li>
        </ul>
      </div>

      <p>For source code installations:</p>

      <div class="itemizedlist">
        <ul type="disc">
          <li>
            <p>FEDORA_DEV should contain the directory under which
            the source was unpacked, including the version part of
            the path. For instance, if you installed the source in
            C:\ and it unpacked into C:\fedora-src-2.0\, FEDORA_DEV
            should be C:\fedora-src-2.0</p>
          </li>

          <li>
            <p>PATH should contain the bin directory of Ant. If you
            don't already have Ant installed, or you have a version
            before v1.6.2, you can use the version that comes with
            the Fedora source distribution in under
            %FEDORA_DEV%\res\ant\bin (in Windows) or
            $FEDORA_DEV/res/ant/bin (in Unix). IMPORTANT: If you
            use your own version of Ant, be sure it's v1.6.2+ or
            the build may not work. You can verify this by typing
            "ant -version" at the command prompt. Note: If you opt
            to use the ant binaries included with the source, and
            you're in Unix, be sure to change the permissions on
            the files in the bin directory so that you can execute
            ant. This can be done with the command: <span class=
            "emphasis"><em>chmod 755
            $FEDORA_DEV/res/ant/bin/*</em></span></p>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="titlepage">
      <div>
        <h2 class="title" style="clear: both"><a name="d0e185" id=
        "d0e185"></a>Compiling a Source Distribution</h2>
      </div>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e188" id="d0e188"></a>It's
          Easy</h3>
        </div>
      </div>

      <p>Provided that you've followed all the appropriate
      instructions above, you can now go to the $FEDORA_DEV
      directory and type:</p>

      <blockquote class="blockquote">
        <p><span class="emphasis"><em>ant
        serverdist</em></span></p>
      </blockquote>

      <p>and everything necessary for a server and client
      distribution will be put in $FEDORA_DEV/dist</p>

      <p>If you want to run the server and client straight from
      where it was compiled, be sure to set your FEDORA_HOME to
      $FEDORA_DEV/dist, and add $FEDORA_HOME/server/bin and
      $FEDORA_HOME/client/bin to your PATH environment
      variable.</p>

      <p>For other targets, see the build.xml file or type ant
      -projecthelp for a brief description of each.</p>

      <p>To erase all temporary and compiled files created by a
      build, first ensure that your database and Fedora server are
      stopped, and type ant clean. If you're not using McKoi, you
      should also drop the fedora20 (or whatever you named it)
      database from your RDBMS if you want to start fresh.</p>
    </div>
  </div>

  <div class="section">
    <div class="titlepage">
      <div>
        <h2 class="title" style="clear: both"><a name="d0e207" id=
        "d0e207"></a>Setting up the Server</h2>
      </div>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e210" id=
          "d0e210"></a>Initialize the Database</h3>
        </div>
      </div>

      <p>Fedora is designed to be RDBMS-independent, but comes with
      a pure java database called McKoi. It has been tested and
      works with McKoi, MySQL and Oracle 9i. If you choose to use
      any database but McKoi, we assume here that it is already
      installed.</p>

      <p>Follow the below instructions for the RDBMS of your choice
      in order to create the user and tablespace so that the Fedora
      software can use the database.</p>

      <div class="section">
        <div class="titlepage">
          <div>
            <h4 class="title"><a name="d0e217" id=
            "d0e217"></a>McKoi</h4>
          </div>
        </div>

        <p>Execute the command:</p>

        <blockquote class="blockquote">
          <p>mckoi-init <span class="emphasis"><em>fedoraDBUser
          fedoraDBPass</em></span></p>
        </blockquote>

        <p>...where the first parameter is the username you'd like
        to use for the database, and the second parameter is the
        password you'd like to use. Remember this information, as
        it will be needed later when configuring Fedora.</p>

        <p>Username and password values are case sensitive.</p>

        <p>Note: This command resolves to a batch file
        (mckoi-init.bat) in Windows, and a shell script
        (mckoi-init.sh) in Unix. These reside in the server's bin
        directory.</p>
      </div>

      <div class="section">
        <div class="titlepage">
          <div>
            <h4 class="title"><a name="d0e234" id=
            "d0e234"></a>MySQL</h4>
          </div>
        </div>

        <p>Execute the command:</p>

        <blockquote class="blockquote">
          <p>mysql-config <span class="emphasis"><em>installDir
          dbaUser dbaPass fedoraDBUser fedoraDBPass
          dbName mysql41_flag</em></span></p>
        </blockquote>

        <p>Where:</p>

        <div class="itemizedlist">
          <ul type="disc">
            <li>
              <p><span class="emphasis"><em>installDir</em></span>
              is the location where MySQL is installed. In Unix,
              this might be /usr/local/mysql. In Windows, it might
              be C:\mysql</p>
            </li>

            <li>
              <p><span class="emphasis"><em>dbaUser</em></span> is
              the name of the MySQL user with dba privileges. In a
              default MySQL installation, this will be root.</p>

              <p>Please note that dbaUser is case sensitive.</p>
            </li>

            <li>
              <p><span class="emphasis"><em>dbaPass</em></span> is
              the password of the MySQL user with dba privileges.
              In a default MySQL installation, if you're running
              MySQL on the same machine as Fedora, you can usually
              pass "" for this argument.</p>

              <p>Please note that dbaPass is case sensitive.</p>
            </li>

            <li>
              <p><span class=
              "emphasis"><em>fedoraDBUser</em></span> is the
              username you'd like to use for the Fedora software's
              database access. (e.g., fedoraAdmin) Please note that
              this value is case sensitive.</p>
            </li>

            <li>
              <p><span class=
              "emphasis"><em>fedoraDBPass</em></span> is the
              password you'd like to use for the above user. (e.g.,
              fedoraAdmin) Please note that the password is case
              sensitive.</p>
            </li>

            <li>
              <p><span class="emphasis"><em>dbName</em></span> is
              the name you'd like to use for the Fedora database.
              (e.g., fedora20) Please note that the user name is
              case sensitive.</p>
            </li>
            
            <li>
              <p><span class="emphasis"><em>mysql41_flag</em></span> is
              an optional paramter that is only used if you are running
              MySQL 4.1.x. If using MySQL 4.1.x Fedora requires that you 
              set the default character set to "utf8" and the default
              collation to "utf8_bin" for the Fedora database. Any value 
              may be used for this parameter. If present, the script will 
              automatically set the default character set to "utf8" and 
              the default collation to "utf8_bin" for the Fedora SQL 
              database. If you are running versions of MySQL prior to 4.1,
              OMIT THIS PARAMETER.</p>
            </li>            
            
          </ul>
        </div>

        <p>Note: This command resolves to a batch file
        (mysql-config.bat) in Windows, and a shell script
        (mysql-config.sh) in Unix. These reside in the server's bin
        directory.</p>

        <p><span class="emphasis"><em>Important:</em></span> Fedora
        comes installed with version 3.0.15 of the MySQL
        Connector/J JDBC driver that is compatible with MySQL
        v3.23.x, 4.0.x, and 4.1.x. If you plan to use MySQL 4.1.x,
        be sure to follow the note above referring to the mysql41_flag
        option on the mysql-config database configuration script.</p>

        <p><span class="emphasis"><em>Important:</em></span> If you
        are installing Fedora under Windows and plan to use an
        earlier version of MYSQL (e.g., 3.23.53 thru 3.23.58), you
        should use all lower case characters when specifiying the
        Fedora database name when running the mysql-config.bat
        script (e.g., "myfedoradb" instead of "MyFedoraDb").
        Additional information regarding the use of earlier
        versions of Windows MYSQL can be found <!--<a href=
        "http://www.fedora.info/wiki/bin/view/Fedora/PoolWasntFoundMessage"
           target="_top">on this page of the Fedora wiki</a>.--></p>
      </div>

      <div class="section">
        <div class="titlepage">
          <div>
            <h4 class="title"><a name="d0e306" id=
            "d0e306"></a>Oracle 9i</h4>
          </div>
        </div>

        <p>With Oracle 9i, you will need to use an administrative
        account to manually create 1) the fedora user on the db,
        and 2) the tablespace on which that user has complete
        control.</p>

        <p>Then you'll need to make sure the Fedora server has the
        JDBC driver necessary to connect to the database. You can
        download the appropriate Oracle JDBC driver from <a href=
        "http://technet.oracle.com/software/tech/java/sqlj_jdbc/content.html"
           target=
           "_top">http://technet.oracle.com/software/tech/java/sqlj_jdbc/content.html</a>.
           This will come with a file called <span class=
           "emphasis"><em>ojdbc14.jar</em></span>. You will need to
           put that file on your Fedora server, in the directory:
           <span class=
           "emphasis"><em>FEDORA_HOME/server/jakarta-tomcat-5.0.28/common/lib</em></span>.</p>

        <p>Then you should modify the
        FEDORA_HOME/server/config/fedora.fcfg file and ensure that
        the datastore entry (near the bottom) for Oracle points to
        the right host and database. The fedora.fcfg file that
        comes with the distribution uses a database on the local
        host called "fedora20".</p>

        <p>When you start fedora, be sure to use the parameter
        "oracle", as in <span class="emphasis"><em>fedora-start
        oracle</em></span>. Starting the server is more fully
        explained later.</p>
      </div>

      <div class="section">
        <div class="titlepage">
          <div>
            <h4 class="title"><a name="d0e329" id=
            "d0e329"></a>Other Databases</h4>
          </div>
        </div>

        <p>If you want to use a different database, it's an option,
        but it will take some extra work. Here's how it can be
        done:</p>

        <div class="itemizedlist">
          <ul type="disc">
            <li>
              <p>The database needs to be JDBC-compliant and must
              support common SQL-92 syntax. The driver will need to
              be put in the server's jakarta-tomcat-5.0.28/common/lib directory
              so that Fedora picks it up, and the JDBC url will
              need to be configured appropriately in the server's
              config/fedora.fcfg file.</p>
            </li>
          </ul>
        </div>

        <p>Upon startup, Fedora checks the database for all
        required tables. If they don't exist, it creates them.
        Creation of tables is a much less standardized task across
        RDBMSs than regular SQL queries. Thus, you must either</p>

        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>create the tables and indexes and auto-increments
              yourself in your own database (see the file:
              src/dbspec/server/fedora/server/storage/resources/DefaultDOManager.dbspec
              in the source distribution for the RDBMS-neutral
              table specifications),</p>
            </li>

            <li>
              <p>write your own subclass of
              fedora.utilities.DDLConverter for your database
              software, include it in a jar file in
              server/jakarta-tomcat-5.0.28/common/lib, and associate it with the
              JDBC driver inside the server/config/fedora.fcfg file
              (see how it's done by looking at the
              MySQLDDLConverter and McKoiDDLConverter associations
              with their respective drivers in the fedora.fcfg
              file, and the classes' implementations in the source
              distribution).</p>
            </li>
          </ol>
        </div>

        <p>If you choose option #2, please tell us about it, as it
        will be useful for other users of Fedora! Option 2 is
        harder, but it will make future installations of new
        versions of Fedora (where the db schema will likely change)
        much easier for you if you plan on using that database
        later.</p>
      </div>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e349" id="d0e349"></a>Modify
          Fedora's Configuration</h3>
        </div>
      </div>

      <p>Before starting for the first time, you will want to make
      some changes in Fedora's main configuration file,
      server/config/fedora.fcfg.</p>

      <div class="section">
        <div class="titlepage">
          <div>
            <h4 class="title"><a name="d0e354" id=
            "d0e354"></a>Introducing fedora.fcfg</h4>
          </div>
        </div>

        <p>The configuration file has a simple schema. It starts
        with a server element, under which a series of param
        elements occur, followed by a series of module elements,
        followed by a series of datastore elements.</p>

        <p>The param elements directly following the root server
        element are used to control what are considered generic
        server functionality. Examples include the level of logging
        to do, the port on which the server should be exposed, and
        the superuser password.</p>

        <p>The module elements are used to configure specific parts
        of Fedora. For instance, the module with the role
        attribute, "fedora.server.search.FieldSearch" is used to
        configure the field-searching component of the server.
        Inside the module element, several param elements are
        included. These are specific to that module's
        implementation. Descriptions of each parameter can
        currently be found in the configuration file itself.
        Important ones will be listed below.</p>

        <p>The datastore elements are used to configure various
        databases that might be used by the system. Although the
        sample configuration file holds several, you will typically
        only need one. The datastore elements are associated with
        the modules by means of a parameter inside the associated
        module. In the sample configuration file, for example, the
        poolNames param of the
        fedora.server.storage.ConnectionPoolManager module refers
        to one of the datastore elements in it's value.</p>
      </div>

      <div class="section">
        <div class="titlepage">
          <div>
            <h4 class="title"><a name="d0e365" id=
            "d0e365"></a>Important Parameters</h4>
          </div>
        </div>

        <p>You will probably want to change the values of the
        following parameters for you own installation. Items in
        <span class="bold"><b>bold</b></span> <span class=
        "emphasis"><em>must</em></span> be changed prior to running
        the server for the first time. Other items may require
        changes depending on your environment. For instance,
        object_store_base should be changed if you're running the
        server in Unix, as the default value is windows-specific.
        All configurable items are described in detail in the
        fedora.fcfg file.</p>

        <div class="variablelist">
          <dl>
            <dt><span class="term">adminPassword</span></dt>

            <dd>
              <p>This is where you set the value of the
              administrative user, "fedoraAdmin"'s password. This
              is used when authenticating remote requests for
              performing administrative functions. Please note that
              this password is case sensitive.</p>
            </dd>

            <dt><span class="term">object_store_base</span></dt>

            <dd>
              <p>A directory where XML serializations of the
              digital objects will be stored. This will be created
              if it doesn't already exist. This parameter must be
              given as an absolute path.</p>
            </dd>

            <dt><span class="term">fedora_temp</span></dt>

            <dd>
              <p>A temporary directory. This will be created if it
              doesn't already exist. This parameter must be given
              as an absolute path.</p>
            </dd>

            <dt><span class="term">fedora_datastreams</span></dt>

            <dd>
              <p>A directory where datastreams of digital objects
              will be stored. This will be created if it doesn't
              already exist. This parameter must be given as an
              absolute path.</p>
            </dd>

            <dt><span class="term">fedoraServerPort</span></dt>

            <dd>
              <p>The port on which the server should run. 8080 is
              often used, but this can be anything your OS / user
              privleges will allow.</p>
            </dd>

            <dt><span class="term">fedoraShutdownPort</span></dt>

            <dd>
              <p>The port on which the server is shutdown. Port
              conflicts can arise if you are running multiple
              instances of a tomcat or Fedora server on the same
              machine. Fedora uses the default shutdown port number
              of 8005. If you are running other standalone
              instances of tomcat or Fedora on the same machine,
              each instance will require a unique shutdown port.
              This parameter allows you to change the port number
              used to shutdown the Fedora server to avoid potential
              port conflicts with other servers.</p>
            </dd>

            <dt><span class="term">fedoraRedirectPort</span></dt>

            <dd>
              <p>The port on which the server is redirected. Port
              conflicts can arise if you are running multiple
              instances of a tomcat or Fedora server on the same
              machine. Fedora uses the default redirect port number
              of 8443. If you are running other standalone
              instances of tomcat or Fedora on the same machine,
              each instance will require a unique redirect port.
              This parameter allows you to change the port number
              used to redirect the Fedora server to avoid potential
              port conflicts with other servers.</p>
            </dd>

            <dt><span class="term"><span class=
            "bold"><b>fedoraServerHost</b></span></span></dt>

            <dd>
              <p>The <span class="emphasis"><em>fully
              qualified</em></span> host name of the machine on
              which Fedora runs. If the machine has aliases, use
              the alias that will be used by people connecting to
              the server (be it via a web browser or one of the
              SOAP API exposures).</p>

              <p>Since you will be changing this value before
              running Fedora for the first time, you must also
              change the hostname (and possibly the port) in the
              URLs inside the demo objects, if you want to use
              them. So, after making changes to the configuration
              file, but before you ingest the demo objects, run the
              <span class=
              "emphasis"><em>fedora-convert-demos</em></span>
              script. See the Client Command-Line Utilities
              document for instructions on using this and other
              scripts that come with Fedora.</p>
            </dd>

            <dt><span class="term"><span class=
            "bold"><b>DOManager/pidNamespace</b></span></span></dt>

            <dd>
              <p>This is the namespace id part of newly generated
              PIDs for objects. This should be a short string
              consisting of the characters [a-z][0-9] and the
              hyphen ("-") character. When objects are first
              ingested or created in the repository, this will be
              the first part of the identifier used for them.
              (Note: the pid namespace won't be used for objects
              that are ingested with a "demo:" pid)</p>
            </dd>

            <dt><span class="term">DOManager/retainPIDs</span></dt>

            <dd>
              <p>This parameter defines the namespaces of PIDs to
              retain during the ingest process. When an object is
              ingested, Fedora normally allocates a unique PID
              within <span class=
              "emphasis"><em>pidNamespace</em></span> for it
              regardless of what PID actually exists in the object.
              This option provides a way to override that behavior
              on a per-pid-namespace basis. If specified, this
              should be a space-delimited list of pid namespaces
              that will be accepted in the object as-is. By
              default, this list includes the namespaces of "test"
              and "demo".</p>
            </dd>

            <dt><span class=
            "term">DOManager/storagePool</span></dt>

            <dd>
              <p>This specifies the database connection pool to be
              used for the storage subsystem. Normally this will
              just identify ConnectionPoolManager's default
              connection pool.</p>
            </dd>

            <dt><span class="term"><span class=
            "bold"><b>Management/allowHosts</b></span></span></dt>

            <dd>
              <p>A comma-separated list of IP ranges (for example,
              "200.200.0.0-255.255.0.0,100.0.0.0-180.0.0.0") that
              the client's address is compared to for Management
              API access. If this is specified, the remote address
              must match for any Management request in order to be
              accepted. If this is not specified, all requests will
              be accepted unless the remote address matches a deny
              pattern (see below). <span class=
              "emphasis"><em>Important:</em></span> The fedora.fcfg
              file that comes with Fedora allows access to
              127.0.0.1 (this is the loopback IP, meaning that the
              only host that can connect for write operations is
              the server). You need to also put your server's real
              IP address in this value, to take care of cases where
              your server, when acting as a client to itself,
              identifies itself with its real IP address. If you
              don't do this, you may run into access restriction
              errors when trying to connect to the server from the
              same machine.</p>
            </dd>

            <dt><span class="term">Management/denyHosts</span></dt>

            <dd>
              <p>IP Ranges to deny. If specified, the remote
              address must not match for any Management request in
              order to be accepted. If this is not specified,
              request acceptance is governed solely by the
              allowHosts parameter.</p>
            </dd>

            <dt><span class="term">Access/allowHosts</span></dt>

            <dd>
              <p>Same as Management/allowHosts, except this
              controls access to the Access API.</p>
            </dd>

            <dt><span class="term">Access/denyHosts</span></dt>

            <dd>
              <p>Same as Management/denyHosts, except this controls
              access to the Access API.</p>
            </dd>

            <dt><span class=
            "term">Access/doMediateDatastreams</span></dt>

            <dd>
              <p>This is for additional repository security. If
              true, all datastreams (even those that are
              referenced) will be piped through Fedora when they
              are sent to behavior services. See the description of
              this parameter inside fedora.fcfg for more detail on
              this option.</p>
            </dd>

            <dt><span class=
            "term">FieldSearch/connectionPool</span></dt>

            <dd>
              <p>Specifies the database connection pool to be used
              for the fielded search functionality. Normally this
              will be ConnectionPoolManager's default pool.</p>
            </dd>

            <dt><span class=
            "term">OAIProvider/repositoryName</span></dt>

            <dd>
              <p>How you want your repository to be named in the
              OAI-PMH interface's Identify request.</p>
            </dd>

            <dt><span class="term"><span class=
            "bold"><b>OAIProvider/repositoryDomainName</b></span></span></dt>

            <dd>
              <p>This will be used in conjunction with the
              pidNamespace to uniquely identify the items in your
              repository to OAI harvesters. The default value is
              example.org, but you'll want to change it to the
              domain name where the repository is hosted.</p>
            </dd>

            <dt><span class=
            "term">OAIProvider/adminEmails</span></dt>

            <dd>
              <p>Who the OAI-PMH interface identifies as
              administrators to harvesters. This is a
              space-separated list.</p>
            </dd>

            <dt><span class="term">OAIProvider/friends</span></dt>

            <dd>
              <p>A space separated list of OAI-PMH provider
              endpoints identifying other providers that you
              associate with. OAI harvesters use this for discovery
              purposes.</p>
            </dd>

            <dt><span class=
            "term">ConnectionPoolManager/defaultPoolName</span></dt>

            <dd>
              <p>The pool to be provided to modules that request
              the default connection pool.</p>
            </dd>

            <dt><span class=
            "term">ConnectionPoolManager/poolNames</span></dt>

            <dd>
              <p>A comma delimited list of pools to make available.
              These should be identified by the id attribute of one
              of the datastore elements.</p>
            </dd>

            <dt><span class="term">datastore/dbUsername</span></dt>

            <dd>
              <p>The username for database access. This should
              match the username used previously when setting up
              the database for Fedora.</p>
            </dd>

            <dt><span class="term">datastore/dbPassword</span></dt>

            <dd>
              <p>The password for the database user. Please note
              that this value is case sensitive.</p>
            </dd>

            <dt><span class="term">datastore/jdbcURL</span></dt>

            <dd>
              <p>A JDBC URL that can be used to connect to your
              database. The syntax must match that required by the
              driver. Working examples for MySQL and McKoi are
              included.</p>
            </dd>

            <dt><span class=
            "term">datastore/jdbcDriverClass</span></dt>

            <dd>
              <p>Identifies the driver to use for connecting to the
              database. This is RDBMS-specific. If you need to use
              a driver that isn't already included, put the .jar
              file in server/jakarta-tomcat-5.0.28/common/lib./</p>
            </dd>
          </dl>
        </div>
      </div>

      <div class="section">
        <div class="titlepage">
          <div>
            <h4 class="title"><a name="d0e565" id=
            "d0e565"></a>Datastream Mediation</h4>
          </div>
        </div>

        <p>Datastream Mediation is an optional feature of the
        Fedora repository system that offers a higher level of
        access restriction for the physical location of datastreams
        in Fedora objects. It is controlled through the boolean
        parameter named doMediateDatastreams in the fedora.fcfg
        configuration file. By default, the value of the
        doMediateDatastreams parameter is set to false which
        disables datastream mediation. The following section
        describes the advantages and disadvantages of using
        Datastream Mediation.</p>

        <p>Content is stored in Fedora digital objects as one or
        more datastreams. Each datastream contains a pointer to the
        physical location of its content. For Referenced External
        Content and Redirected datastreams, this is a pointer to
        remote content that is managed outside the custodianship of
        the repository. For Managed Content and XML Metadata
        datastreams, this is a pointer to internal content that is
        managed by the repository.</p>

        <p>An object's content is accessed through its
        disseminators that interact with external mechanisms
        associated through the disseminator's behavior mechanism
        object. In order for the external mechanisms to function,
        they must have access to the datastream locations. With
        Datastream Mediation disabled, Fedora passes the actual
        physical location of datastreams to external mechanisms as
        part of the dissemination process. If the external
        mechanisms are trusted, the risk of exposing the actual
        datastream locations to these mechanisms may be negligible.
        However, if the mechanisms are not trusted or reside
        completely outside the control of the repository
        administrator, the risk of exposure may be higher. The
        worst-case scenario would be where an untrusted mechanism
        captures the actual datastream locations and then accesses
        the datastreams directly rather than going through the
        Fedora repository.</p>

        <p>The DatastreamMediation option was added to give Fedora
        repository administrators more control over how datastream
        locations are exposed. Using Datastream Mediation does
        affect the functioning of the repository so the
        administrator needs to weigh the advantages and
        disadvantages to determine which option best suits their
        needs.</p>

        <p>When Datastream Mediation is enabled, it essentially
        activates an additional layer of proxying within the
        repository. When dissemination requests are processed, the
        repository will proxy all datastream requests to the
        external mechanisms providing an internal reference in
        place of the actual datastream locations. The external
        mechanisms then must communicate with the Fedora repository
        to resolve the proxy requests and receive the contents of
        the datastream in the form of a bytestream. This additional
        layer of proxying effectively hides the actual datastream
        locations from the external mechanisms and insures that
        Managed Content and XML Metadata datastreams can only be
        directly accessed through the Fedora repository. Datastream
        Mediation will also proxy Referenced External Content
        datastreams, but since these types of datastreams by
        definition are remotely available on the internet , Fedora
        cannot guarantee that their actual locations cannot be
        discovered by other means. Redirected datastreams are never
        proxied.</p>

        <p>Advantages</p>

        <div class="itemizedlist">
          <ul type="disc">
            <li>
              <p>Security - Datastream Mediation insures that
              Managed Content and XML Metadata datastreams can only
              be directly accessed through the Fedora repository.
              It provides an extra layer of security if you have
              external mechanisms that may not be trusted or desire
              to maintain tighter control over the exposure of
              datastream locations.</p>
            </li>
          </ul>
        </div>

        <p>Disadvantages</p>

        <div class="itemizedlist">
          <ul type="disc">
            <li>
              <p>Performance - Datastream Mediation adds an
              additional layer of proxying. It does degrade
              performance slightly since it adds one more network
              hop necessary to resolve a datastream location by the
              external mechanism.</p>
            </li>

            <li>
              <p>Firewall Issues - If your Fedora repository is
              installed behind a network security firewall,
              Datastream Mediation will not function unless you
              have configured the firewall to allow access to the
              Fedora repository port number (default is port 8080).
              This is because external mechanisms must make HTTP
              read requests to the Fedora repository over the
              server's port number to resolve the datastream
              locations. If you have ready access to the firewall's
              configuration, this may be an easy task to
              accomplish. If your firewall is provided by a 3rd
              party, then accomplishing the necessary configuration
              may be more difficult or may even not be
              possible.</p>
            </li>
          </ul>
        </div>

        <p>Ultimately, it is up to the Fedora repository
        administrator to decide if Datastream Mediation should be
        used. Here are some sample scenarios to provide some
        additional guidance.</p>

        <div class="itemizedlist">
          <ul type="disc">
            <li>
              <p>Scenario 1 - Consider a Fedora repository where
              all objects use Managed Content datastreams and the
              administrator has no control over external
              mechanisms. The administrator also wants to insure
              that the only access to Fedora datastreams is through
              the repository. In this scenario, the Fedora
              administrator will want to enable Datastream
              Mediation since the repository manages all the
              datastreams and also wants tight control over how
              datastreams may potentially be accessed.</p>
            </li>

            <li>
              <p>Scenario 2 - Consider a Fedora repository where
              all objects use Referenced External Content
              datastreams and some mechanisms may be untrusted.
              Since all datastreams are Referenced External
              Content, their actual locations could be discovered
              through alternate means on the web. In this scenario,
              the administrator may want to disable Datastream
              Mediation since it does not offer a significant
              improvement in controlling datastream location
              exposure since all of the datastreams in the
              repository are remote content.</p>
            </li>

            <li>
              <p>Scenario 3 - Consider a Fedora repository where
              objects use a mix of datastreams and all external
              mechanisms are untrusted. In this scenario, the
              administrator might decide to enable or disable
              Datastream Mediation depending on the percentage of
              remote datastreams versus Managed Content datastreams
              and on the importantance controlling datastream
              exposure.</p>
            </li>

            <li>
              <p>Scenario 4 - Consider a Fedora repository where
              all objects use Managed Content datastrams and the
              administrator has no control over external
              mechanisms. The Fedora repository is also behind a
              firewall and the administrator cannot alter the
              firewall configuration. The administrator has no
              choice in this scenario and must disable Datastream
              Mediation for the repository to function.</p>
            </li>
          </ul>
        </div>
      </div>

      <div class="section">
        <div class="titlepage">
          <div>
            <h4 class="title"><a name="d0e608" id=
            "d0e608"></a>Other Settings</h4>
          </div>
        </div>

        <p>There are many other parameters you can configure with
        Fedora. See the fedora.fcfg file for documentation on all
        the parameters.</p>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="titlepage">
      <div>
        <h2 class="title" style="clear: both"><a name="d0e613" id=
        "d0e613"></a>Running the Server</h2>
      </div>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e616" id="d0e616"></a>Start
          The Database</h3>
        </div>
      </div>

      <p>If the database isn't already started, start it now.</p>

      <p>If you've chosen to use the included mckoi database, you
      can simply type "mckoi-start" and the database will start</p>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e623" id="d0e623"></a>Start
          The Server!</h3>
        </div>
      </div>

      <p>Fedora is normally started with the command:</p>

      <p><span class="emphasis"><em>fedora-start</em></span></p>

      <p>The configuration file, fedora.fcfg, can be written so
      that it takes a parameter which has the effect of using an
      alternate value for some of the &lt;param...&gt; elements, if
      an alternate parameter exists. The default fedora.fcfg
      assumes that you're using MySQL, but has been written to use
      the mckoi database if you start it with:</p>

      <p><span class="emphasis"><em>fedora-start
      mckoi</em></span></p>

      <p>...so if you're using mckoi, start it with the above
      command instead.</p>

      <p>Read the fedora.fcfg file and look for the attributes
      named "mckoivalue" to see how this is done, if you're curious
      or would like to define your own parameter. You can also
      change the fedora.fcfg so that it doesn't have to take the
      "mckoi" parameter in order to run with mckoi (simply set the
      <span class="emphasis"><em>value</em></span> of the
      parameters to that of the <span class=
      "emphasis"><em>mckoivalue</em></span> attributes so that
      these values are taken by default.</p>

      <p>Note for Unix users: The commands <span class=
      "emphasis"><em>fedora-start</em></span> and <span class=
      "emphasis"><em>fedora-start mckoi</em></span> do <span class=
      "bold"><b>not</b></span> have to be run by root.</p>
    </div>

    <div class="section">
      <div class="titlepage">
        <div>
          <h3 class="title"><a name="d0e661" id=
          "d0e661"></a>Stopping the Server</h3>
        </div>
      </div>

      <p>You can stop the Fedora server with the command:</p>

      <p><span class="emphasis"><em>fedora-stop</em></span></p>

      <p>The database should be shut down only <span class=
      "emphasis"><em>after</em></span> the Fedora server has been
      stopped. If you're using mckoi, you can stop it with the
      command:</p>

      <p><span class="emphasis"><em>mckoi-stop [dbUser]
      [dbPassword]</em></span></p>

      <p>Other databases will have their own shutdown scripts or
      commands.</p>
    </div>
  </div>

  <div class="section">
    <div class="titlepage">
      <div>
        <h2 class="title" style="clear: both"><a name="d0e683" id=
        "d0e683"></a>Configuring Fedora to Run on a Different Host
        or Port</h2>
      </div>
    </div>

    <p>The Fedora server now has internal support for avoiding
    breakage of self-referential URLs (i.e., URLs that contain the
    hostname and port of the Fedora server itself). This change
    allows the Fedora server host and port to be re-configured
    without breaking digital objects that contained URLs that
    referred to a previous host and port configuration.</p>

    <p>The host name and port number on which the Fedora server
    runs is controlled by the <span class=
    "emphasis"><em>fedoraServerHost</em></span> and <span class=
    "emphasis"><em>fedoraServerPort</em></span> parameters in the
    fedora.fcfg configuration file. By default, these are set to
    the host name of <span class=
    "emphasis"><em>localhost</em></span> and port number of
    <span class="emphasis"><em>8080</em></span>. The steps you need
    to take in order to change host name and/or port number vary
    slightly depending on whether you are making the change for the
    first time or making the change on a pre-existing Fedora
    server.</p>

    <p>If you are installling Fedora for the first time and want to
    run using a host or port other than the defaults, you need to
    do the following:</p>

    <div class="itemizedlist">
      <ul type="disc">
        <li>
          <p>Change the values of <span class=
          "emphasis"><em>fedoraServerHost</em></span> and
          <span class="emphasis"><em>fedoraServerPort</em></span>
          to the values you want to use in the fedora.fcfg
          file.</p>
        </li>

        <li>
          <p>Run the demo object converter utility script to change
          the host and/or port in the demo objects from localhost
          and 8080 to the values you specified in the fedora.fcfg
          file. Refer to the <a href=
          "../client/cmd-line/index.html" target=
          "_top">Command-line Utilities documentation</a> for
          additional details on running the demo object
          converter.</p>
        </li>

        <li>
          <p>If you plan to use the Soap Client which provides a
          sample interface to API-A, you will also need to update
          the parameter <span class=
          "emphasis"><em>fedoraEndpoint</em></span> with the new
          host name and/or port number in the soapclient.properties
          file. On Windows, this file is located in the
          distribution in:</p>

          <p><span class=
          "emphasis"><em>%fedora_home%\server\jakarta-tomcat-5.0.28\webapps\soapclient\WEB-INF\soapclient.properties</em></span></p>

          <p>On unix, this file is located in the distribution
          in:</p>

          <p><span class=
          "emphasis"><em>$FEDORA_HOME/server/jakarta-tomcat-5.0.28/webapps/soapclient/WEB-INF/soapclient.properties</em></span></p>

          <p>Refer to the <a href=
          "../client/servlet/soapclient/index.html" target=
          "_top">Soap Client documentation</a> for additional
          information regarding configuration of the Soap
          Client.</p>
        </li>

        <li>
          <p>Start the Fedora server.</p>
        </li>

        <li>
          <p>Ingest the demo objects.</p>
        </li>

        <li>
          <p>When invoking the Fedora admin-client, remember to
          specify the new host name and/or port number when
          invoking the client. e.g., fedora-admin hostname port
          fedora-username fedora-password</p>

          <p>Please note that all user names and passwords are case
          sensitive.</p>
        </li>
      </ul>
    </div>

    <p>If you have an existing Fedora server already running and
    you need to change the host name and/or port number on which
    the server runs, you need to do the following:</p>

    <div class="itemizedlist">
      <ul type="disc">
        <li>
          <p>Stop the Fedora server.</p>
        </li>

        <li>
          <p>Change the values of <span class=
          "emphasis"><em>fedoraServerHost</em></span> and
          <span class="emphasis"><em>fedoraServerPort</em></span>
          to the values you want to use in the fedora.fcfg
          file.</p>
        </li>

        <li>
          <p>If you plan to use the Soap Client which provides an
          example interface to API-A, you will also need to update
          the parameter <span class=
          "emphasis"><em>fedoraEndpoint</em></span> with the new
          host name and/or port number in the soapclient.properties
          file. On Windows, this file is located in the
          distribution in:</p>

          <p><span class=
          "emphasis"><em>%fedora_home%\server\jakarta-tomcat-5.0.28\webapps\soapclient\WEB-INF\soapclient.properties</em></span></p>

          <p>On unix, this file is located in the distribution
          in:</p>

          <p><span class=
          "emphasis"><em>$FEDORA_HOME/server/jakarta-tomcat-5.0.28/webapps/soapclient/WEB-INF/soapclient.properties</em></span></p>

          <p>Refer to the <a href=
          "../client/servlet/soapclient/index.html" target=
          "_top">Soap Client documentation</a> for additional
          information regarding configuration of the Soap
          Client.</p>
        </li>

        <li>
          <p>Restart the Fedora server.</p>
        </li>

        <li>
          <p>When invoking the Fedora Admin Client, remember to
          specify the new host name and/or port number when
          invoking the client. e.g., fedora-admin hostname port
          fedora-username fedora-password. Please note that all
          user names and passwords are case sensitive.</p>
        </li>
      </ul>
    </div>
  </div>

  <div class="section">
    <div class="titlepage">
      <div>
        <h2 class="title" style="clear: both"><a name="d0e801" id=
        "d0e801"></a>Server logs</h2>
      </div>
    </div>

    <p>While the server is running, it writes logs to
    FEDORA_HOME/server/logs. These are timestamped files, written
    in a simple XML format. You can use these logs to get more
    extensive information about what the server is doing or to
    diagnose problems.</p>
  </div>

  <div class="section">
    <div class="titlepage">
      <div>
        <h2 class="title" style="clear: both"><a name="d0e806" id=
        "d0e806"></a>Where From Here?</h2>
      </div>
    </div>

    <p>If you've just got your Fedora server up and running, it's a
    good idea to check out the demonstration objects to get an idea
    of how Fedora works. See <a href="demos.html" target="_top">the
    Demo Manual</a> for complete descriptions of the demos.</p>

    <p>The demos may be ingested via the Fedora Admin GUI tool or
    from the command line. If you ingest the from the Admin GUI,
    you must be sure to ingest bdef objects first, then bmech
    objects, then regular objects.</p>

    <p>To access the Admin GUI use the command:</p>

    <p><span class="emphasis"><em>fedora-admin [hostname] [port]
    [username] [password]</em></span></p>

    <p>To ingest the demos from the command line (recommended), use
    the command:</p>

    <p><span class="emphasis"><em>fedora-ingest-demos [hostname]
    [port] [username] [password]</em></span></p>

    <p>Please note that the demo objects must be ingested before
    they can be discovered using the default search interface.</p>
  </div>

  <div id="footer">
    <div id="copyright">
      Copyright &#xA9; 2005 Fedora Project
    </div>

    <div id="lastModified">
      Last Modified <script type="text/javascript">
      //<![CDATA[
            var cvsDate = "$Date$";
            var parts = cvsDate.split(" ");
            var modifiedDate = parts[1];
            document.write(modifiedDate);
      //]]>
      </script>
    </div>
  </div>
</body>
</html>
