<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
                      
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
    <title>Fedora Migration Utility Guide</title>
    <link rel="stylesheet" type="text/css" href="../docstyle.css" />
</head>

<body>
<div id="header">
    <a href="../index.html" id="logo"></a>
    <div id="title">
        <h1>Fedora Migration Utility Guide</h1>
        <h2>Fedora Release 2.0</h2>
    </div>
</div>

<div class="toc">
    <h2>Table of Contents</h2>
    <div class="tocbox">
        <ol>
          <li><a href="#intro">Introduction</a></li>
          <li><a href="#migrate">Migrating From Fedora 1.2.1 to Fedora 2.0</a></li>
        </ol>
    </div>
</div>

  <div class="sec1">
    <div class="titlepage">
      <div>
        <h2 class="title" style="clear: both"><a name="intro" id=
        "intro"></a>1. Introduction</h2>
      </div>
    </div>

    <p>Users migrating from Fedora Release 1.2.1 need to follow the
    steps outlined in the section entitled, Migrating From Fedora
    1.2.1 to Fedora 2.0, and apply patch number 2 to their existing
    Fedora 1.2.1 repository BEFORE attempting migration to Fedora
    2.0. Failure to do so can severely limit future migration
    options.</p>

    <p>If you are running a version of the Fedora software prior to
    version 1.2.1, you will need to migrate your server software up
    to version 1.2.1 first, and then proceed with the migration
    from Fedora 1.2.1 to Fedora 2.0. Steps for migrating to Fedora
    1.2.1 can be found in the release notes section for 
    <a href="release-notes.html#rel1.2.1">Fedora 1.2.1.</a> This
    document only address migration from a Fedora 1.2.1 repository
    to a Fedora 2.0 repository.</p>
  </div>

    <div class="sec2">
      <h2><a name="migrate" id="migrate">2. Migrating
      From Fedora 1.2.1 to Fedora 2.0</a></h2>

      <p>If you are upgrading from Fedora 1.2.1 to Fedora 2.0
      follow these steps:</p>

      <ol>
        <li>Download patch number 2 from
        <a href="http://www.fedora.info/release/1.2.1/patch2">
        http://www.fedora.info/release/1.2.1/patch2.</a></li>

        <li>Make sure you are running v1.2.1 of the Fedora server
        software.

          <p>DO NOT APPLY THIS PATCH TO ANY OTHER VERSION OF
          FEDORA!</p>

          <p>To check your repository's version, check the
          "describe" page. For instance, if you're running Fedora
          on localhost:8080, visit
          http://localhost:8080/fedora/describe</p>
        </li>

        <li>Shut down your Fedora 1.2.1 server (using
        fedora-stop)</li>

        <li>Make a backup of the METSLikeExportDOSerializer.class
        file.

          <p>Under Windows, make a backup of the following
          file:</p>

          <div class="code">
            <pre>
%FEDORA_HOME%\server\jakarta-tomcat-5.0.28\webapps\fedora\WEB-INF\classes\fedora\server\storage\translation\METSLikeExportDOSerializer.class
</pre>
          </div>

          <p>Under Unix, make a backup of the following file:</p>

          <div class="code">
            <pre>
$FEDORA_HOME/server/jakarta-tomcat-5.0.28/webapps/fedora/WEB-INF/classes/fedora/server/storage/translation/METSLikeExportDOSerializer.class
</pre>
          </div>
        </li>

        <li>Copy the METSLikeExportDOSerializer.class from this
        patch into the above directory replacing the one there.

          <p>Under Windows, copy the
          METSLikeExportDOSerializer.class from patch into the
          following directory</p>

          <div class="code">
            <pre>
%FEDORA_HOME%\server\jakarta-tomcat-5.0.28\webapps\fedora\WEB-INF\classes\fedora\server\storage\translation 
</pre>
          </div>

          <p>OVER THE EXISTING FILE.</p>

          <p>Under Unix, copy the METSLikeExportDOSerializer.class
          from patch into the following directory</p>

          <div class="code">
            <pre>
$FEDORA_HOME/server/jakarta-tomcat-5.0.28/webapps/fedora/WEB-INF/classes/fedora/server/storage/translation 
</pre>
          </div>

          <p>OVER THE EXISTING FILE.</p>
        </li>

        <li>(OPTIONAL) If you installed the source code
        distribution of Fedora, you should also copy the included
        METSLikeExportDOSerializer.java file into your source
        directory.

          <p>Under Windows, copy the
          METSLikeExportDOSerializer.java file from the patch into
          the following directory</p>

          <div class="code">
            <pre>
%FEDORA_HOME%\src\java\fedora\server\storage\translation
</pre>
          </div>

          <p>OVER THE EXISTING FILE.</p>

          <p>Under Unix, copy the METSLikeExportDOSerializer.java
          file from the patch into the following directory</p>

          <div class="code">
            <pre>
$FEDORA_HOME/src/java/fedora/server/storage/translation
</pre>
          </div>

          <p>OVER THE EXISTING FILE.</p>
        </li>

        <li>Re-start your Fedora 1.2.1 server (using fedora-start).
        Your Fedora 1.2.1 repository is now ready for exporting its
        objects to the new server.</li>

        <li>Download the Fedora 2.0 software from <a href=
        "http://www.fedora.info/release/2.0">http://www.fedora.info/release/2.0</a></li>

        <li>Install and configure the new Fedora 2.0 repository
        with a different host and port than the Fedora 1.2.1
        server.</li>

        <li>Start the Fedora 2.0 server (using fedora-start).</li>

        <li>There are two ways to ingest objects from the 1.2.1
        server: 1) use the admin GUI client to ingest the objects
        from the 1.2.1 repository or 2) use the fedora-ingest
        command-line utility to ingest the objects from the 1.2.1
        repository

          <ol type="a">
            <li>Using the admin GUI client to ingest objects from
            the 1.2.1 repository

              <ol type="i">
                <li>Start the fedora admin GUI client (using
                fedora-admin).</li>

                <li>Under the File menu item, select File, Ingest,
                Object By Type, From Repository.</li>

                <li>Specify the hostname and port of the Fedora
                1.2.1 server from which you want to ingest objects.
                Specify the administrator username and password for
                the 1.2.1 repository.</li>

                <li>Select all three object types including
                Behavior Definition, Behavior Mechanism, and Data
                object and click OK.</li>

                <li>The Fedora 2.0 server will now ingest all
                objects from the 1.2.1 repository.</li>
              </ol>OR
            </li>

            <li>Using the fedora-ingest command-line utility to
            ingest objects from the 1.2.1 repository.

              <ol type="i">
                <li>Run the fedora-ingest command-line utility
                which is found in the client/bin directory.

                  <p>Under Windows, this file is found in:</p>

                  <div class="code">
                    <pre>
%FEDORA_HOME%\client\bin\fedora-ingest.bat
</pre>
                  </div>

                  <p>Under Unix, this file is found in:</p>

                  <div class="code">
                    <pre>
$FEDORA_HOME/client/bin/fedora-ingest.sh
</pre>
                  </div>
                </li>

                <li>Arguments for the fedora-ingest utility should
                include the following:

                  <ul>
                    <li>Type of ingest: specify R for
                    repository</li>

                    <li>Hostname and port of the 1.2.1 repository
                    from which you wish to ingest objects:
                    source-host:source-port</li>

                    <li>Administrator username of the 1.2.1
                    repository: fedoraAdmin</li>

                    <li>Password for the administrator username of
                    the 1.2.1 repository: fedoraAdmin is the
                    default</li>

                    <li>Type of objects to ingest: specify DMO for
                    all three object types.</li>

                    <li>Hostname and port of the 2.0 repository
                    into which you are ingesting the objects:
                    destination-host:destination-port</li>

                    <li>Administrator username of the 2.0
                    repository: fedoraAdmin</li>

                    <li>Password for the administrator username of
                    the 2.0 repository: fedoraAdmin is the
                    default</li>

                    <li>Log message: use "" for no message.

                      <p>For example:</p>

                      <div class="code">
                        <pre>
fedora-ingest r src-host:src-port fedoraAdmin fedoraAdmin DMO dest-host:dest-port fedoraAdmin fedoraAdmin ""
</pre>
                      </div>
                    </li>
                  </ul>
                </li>
              </ol>
            </li>
          </ol>
        </li>

        <li>After successfully ingesting all objects from the 1.2.1
        repository, shutdown the 1.2.1 repository (using
        fedora-stop).</li>

        <li>If you desire to run the Fedora 2.0 repository under
        the same hostname and port as the 1.2.1 repository, you can
        now shutdown the 2.0 repository using fedora-stop,
        reconfigure the host and port in the fedora.fcfg file for
        the 2.0 repository to match those of the previous 1.2.1
        repository, and restart the Fedora 2.0 repository.</li>
      </ol>
    </div>

  <div id="footer">
    <div id="copyright">
      Copyright &#xA9; 2005 Fedora Project
    </div>

    <div id="lastModified">
      Last Modified <script type="text/javascript">
      //<![CDATA[
            var cvsDate = "$Date$";
            var parts = cvsDate.split(" ");
            var modifiedDate = parts[1];
            document.write(modifiedDate);
      //]]>
      </script>
    </div>
  </div>
</body>
</html>
