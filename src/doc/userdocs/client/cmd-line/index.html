<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
  <title>Fedora Client Command-Line Utilities</title>
  <link rel="stylesheet" type="text/css" href="../../docstyle.css" />
</head>

<body>
  <div id="header">
    <a href="../index.html" id="logo"></a>

    <div id="title">
      <h1>Fedora Client Command-Line Utilities</h1>

      <h2>Fedora Release 2.1b</h2>
    </div>
  </div>

  <div class="toc">
    <h2>Table of Contents</h2>

    <div class="tocbox">
      <ol>
        <li><a href="#intro">Introduction</a></li>

        <li><a href="#dsinfo">fedora-dsinfo</a></li>

        <li><a href="#export">fedora-export</a></li>

        <li><a href="#find">fedora-find</a></li>

        <li><a href="#ingest">fedora-ingest</a></li>

        <li><a href="#indemo">fedora-ingest-demos</a></li>

        <li><a href="#cvdemo">fedora-convert-demos</a></li>

        <li><a href="#purge">fedora-purge</a></li>

        <li><a href="#modify">fedora-modify</a></li>

        <li><a href="#bbuild">fedora-batch-build</a></li>

        <li><a href="#bingest">fedora-batch-ingest</a></li>

        <li><a href="#bbdingest">fedora-batch-buildingest</a></li>
      </ol>
    </div>
  </div>

  <div class="sec1">
    <div>
      <h2><a name="intro" id="intro"></a>Introduction</h2>
    </div>

    <p>The Fedora client distribution comes with several
    command-line utilities that can be used to run some common
    operations without bringing up the GUI or writing your own SOAP
    client. A description and usage instructions for each
    follows.</p>

    <p>This guide assumes you have correctly installed the Fedora
    client distribution as per the install guide, including having
    set up your PATH and FEDORA_HOME appropriately. The
    command-line scripts are located in FEDORA_HOME/client/bin/. In
    Windows, these commands resolve to batch files (.bat); in
    <span class="GramE">Unix</span>, they resolve to shell scripts
    (.sh).</p>
  </div>

  <div class="sec1">
    <h2><a name="dsinfo" id="dsinfo"></a>fedora-dsinfo</h2>

    <blockquote>
      <p><b>fedora-dsinfo</b> [hostname] [port-number] [user]
      [pass] [<span class="SpellE">pid</span>] [protocol]</p>
    </blockquote>

    <p>Where:</p>

    <ul>
      <li><b>[hostname]</b> - The hostname of the Fedora server;
      default is localhost.</li>

      <li><b>[port-number]</b> - The port number on which the
      Fedora server is running; default is 8080.</li>

      <li><b>[user]</b> - The Fedora user (e.g. fedoraAdmin).</li>

      <li><b>[pass]</b> - The Fedora user's password.</li>

      <li><b>[pid]</b> - The pid of the object whose datastream
      information should be shown.</li>
      <li><b>[protocol]</b> - Is how to connect to repository, either<tt> http </tt>or<tt> https</tt>.</li>

    </ul>Example:

    <blockquote>
      <p><b>fedora-dsinfo localhost 8080 fedoraAdmin fedoraAdmin demo:5 http</b></p>
       <p>Displays key information about each of an object's datastreams.</p>
    </blockquote>


  </div>

  <div class="sec1">
    <h2><a name="export" id="export">fedora-export</a></h2>

    <p><b>fedora-export</b> [HST:PRT] [USR] [PSS] [PID|FTYPS] [FORMAT] [ECONTEXT] [PATH] [PROTOCOL]</p>

    <p>Where:</p>

    <ul>
      <li><b>[HST:PRT]</b> - The repository's hostname and the port separated by colon.</li>

      <li><b>[USR]</b> - The id of the repository user.</li>

      <li><b>[PSS]</b> - The password of the repository user.</li>

      <li><b>[PID|FTYPS]</b> - Either the identifier (PID) of the object to export from the
      repository OR the types of objects to export (FTYPS).  FTYPS can be any combination 
      of the characters O, D,  and M, specifying which Fedora object type(s) should be
      exported. O=regular data objects, D=behavior definitions,  M=behavior mechanisms.</li>
      
      <li><b>[FORMAT]</b> - The XML format to export.  Valid options are:
         <em>foxml1.0 </em>(for FOXML), <em>metslikefedora1</em> (for METS), or 
         <em>default</em>.</li>
         
      <li> <b>[ECONTEXT] </b> - The export context (which indicates what use case
         the output should be prepared for.  Valid options are: <em>public</em>, <em>migrate</em>, 
         <em>archive </em>, or <em>default</em>.</li>
         
      <li><b>[PATH]</b> - The directory to export to.</li>

      <li><b>[PROTOCOL]</b> - Is how to connect to repository, either<tt> http </tt>or<tt> https</tt>.</li>
    </ul>

    <div>
      <p>Examples:</p>
      <blockquote>
	<p><b>fedora-export example.com:80 fedoraAdmin fedoraAdmin demo:1 foxml1.0 migrate http</b></p>
  	<p>Exports demo:1 for migration in FOXML format  (from example.com:80 to the current directory).</p>
	<br></br>
	<p><b>fedora-export example.com:80 fedoraAdmin fedoraAdmin DMO default default /tmp/fedoradump http</b></p>
  	<p>Exports all objects in the default export format and context (from example.com:80 to directory /tmp/fedoradump).</p>
      </blockquote>
    </div>

    <div class="sec1">
      <h2><a name="find" id="find"></a>fedora-find</h2>

      <blockquote>
        <p><b>fedora-find</b> [hostname] [port-number] [fieldList] 
        [searchString] [protocol]</p>
      </blockquote>

      <p>Where:</p>
    </div>

    <ul>
      <li><b>[hostname]</b> - The hostname of the Fedora server;
      default is localhost.</li>

      <li><b>[port-number]</b> - The port number on which the
      Fedora server is running; default is 8080.</li>

      <li><b>[fieldList]</b> - A space-delimited list of fields.
      These are the fields that will be displayed for each object
      that matches the searchString. See
      http://host:port/fedora/search for a complete list of
      displayable fields and descriptions of each.</li>

      <li><b>[searchString]</b> - A simple text string to search
      all fields for. This may include wildcard characters and is
      case-insensitive.</li>
      
	<li><b>[protocol]</b> - Is how to connect to repository, either<tt> http </tt>or<tt> https</tt>.</li>
    </ul>

    <p>Example:</p>

    <blockquote>
      <p><b>fedora-find localhost 8080 "pid fType title description" "fedora" http</b></p>

      <p>(shows the pid, Fedora object type, title, and description
      fields of each object that has the word fedora somewhere in
      it's indexed fields.)</p>
    </blockquote>

    <p>A simple way to search a repository's indexed fields. More
    advanced searches can be done with the web-based search
    interface at http://host:port/fedora/search, or the Admin GUI's
    search interface.</p>
  </div>

  <div class="sec1">
    <h2><a name="ingest" id="ingest"></a>fedora-ingest</h2>

    <blockquote>
      <p><b>fedora-ingest</b> f[ile] [PATH] [FORMAT] [THST:TPRT] [TUSR] [TPSS] [TPROTOCOL]
      [LOG]</p>

      <p><b>fedora-ingest</b> d[ir] [PATH] [FORMAT] [FTYPS] [THST:TPRT] [TUSR] [TPSS] [TPROTOCOL] [LOG]</p>

      <p><b>fedora-ingest</b> r[epos] [SHST:SPRT] [SUSR] [SPSS] [PID|FTYPS]
      [THST:TPRT] [TUSR] [TPSS] [SPROTOCOL] [TPROTOCOL] [LOG]</p>
    </blockquote>

    <p>Where:</p>

    <ul>
    	<li>f|[ile] or d[ir] or r[epos] indicates the whether the ingest is from a file, directory, or repository as source.</li>
      <li><b>PATH</b> - the local file or directory name.</li>
      
      <li><b>[FORMAT]</b>  - the XML format of the ingest file(s). Valid options are:
         <em>foxml1.0 </em>(for FOXML), <em>metslikefedora1</em> (for METS)</li>

      <li><b>[SHST/THST]</b> - the source or target repository's
      hostname.</li>

      <li><b>[SPRT/TPRT]</b> - the source or target repository's port
      number.</li>

      <li><b>[SUSR/TUSR]</b> - the id of the source or target
      repository user.</li>

      <li><b>[SPSS/TPSS]</b> - the password of the source or target
      repository user.</li>
      
      <li><b>[PID|FTYPS]</b> - Either the identifier (PID) of the object to export from the
      repository OR the types of objects to export (FTYPS).  FTYPS can be any combination 
      of the characters O, D,  and M, specifying which Fedora object type(s) should be
      exported. O=regular data objects, D=behavior definitions,  M=behavior mechanisms.</li>
      
	<li><b>[SPROTOCOL]</b> -  the protocol to communicate with source repository, either<tt> http </tt>or<tt> https</tt>.</li>

      <li><b>[TPROTOCOL]</b> -  the protocol to communicate with target repository, either<tt> http </tt>or<tt> https</tt>.</li>

      <li><b>[LOG]</b> - the optional log message. If unspecified,
      the log message will indicate the source of the
      object(s).</li>
    </ul>

    <p>Examples:</p>
    <blockquote>
	<p><b>fedora-ingest f obj1.xml foxml1.0 myrepo.com:80 jane jpw http</b></p>

  <p>Ingests obj1.xml (encoded in foxml1.0 format) from the
  current directory into the repository at myrepo.com:80
  as user 'jane' with password 'jpw'.
  The logmessage will be system-generated, indicating
  the source path+filename.</p>

	<p><b>fedora-ingest d c:\archive foxml1.0 M myrepo.com:80 jane janepw http ""</b></p>

  <p>Traverses entire directory structure of c:\archive, and ingests
  any file that looks like a behavior mechanism object (M).
  It assumes all files will be in the XML format 'foxml1.0'
  and will fail on ingests of files that are not of this format.
  All log messages will be the quoted string.</p>

	<p><b>fedora-ingest d c:\archive foxml1.0 ODM myrepo.com:80 jane janepw http "for jane"</b></p>

  <p>Same as above, but ingests all three types of objects (O,D,M).</p>

	<p><b>fedora-ingest r jrepo.com:8081 mike mpw demo:1 myrepo.com:80 jane jpw http ""</b></p>

 <p>Ingests the object whose pid is 'demo:1' from the source repository
  'srcrepo.com:8081' into the target repository 'myrepo.com:80'.
  The object will be exported from the source repository in the default
  export format configured at the source.
  All log messages will be empty.</p> 

	<p><b>fedora-ingest r jrepo.com:8081 mike mpw O myrepo.com:80 jane jpw http ""</b></p>

  <p>Same as above, but ingests all data objects (type O).</p>
    
    </blockquote>
  </div>

  <div class="sec1">
    <h2><a name="indemo" id="indemo"></a>fedora-ingest-demos</h2>

    <blockquote>
      <p><b>fedora-ingest-demos</b> [hostname] [port-number] [user]
      [pass] [protocol]</p>
    </blockquote>

    <p>Where:</p>

    <ul>
      <li><b>[hostname]</b> - The hostname of the Fedora server;
      default is localhost.</li>

      <li><b>[port-number]</b> - The port number on which the
      Fedora server is running; default is 8080.</li>

      <li><b>[user]</b> - The Fedora user (e.g. fedoraAdmin).</li>

      <li><b>[pass]</b> - The Fedora user's password.</li>

	<li><b>[protocol]</b> - Is how to connect to repository, either<tt> http </tt>or<tt> https</tt>.</li>
    </ul>

    <p>Example:</p>

    <blockquote>
      <p><b>fedora-ingest-demos localhost 8080 fedoraAdmin fedoraAdmin</b></p>
    </blockquote>

    <p>A convenient script to ingest all included demo objects for
    a new Fedora installation. See the Demo guide for descriptions
    of these objects. Note: This script should not be run until you
    have ensured that the hostname and port numbers in the demo
    objects have been corrected (with the fedora-convert-demos
    script) to use the actual hostname and port of your Fedora
    server.</p>
  </div>

  <div class="sec1">
    <h2><a name="cvdemo" id="cvdemo"></a>fedora-convert-demos</h2>

    <blockquote>
      <p><b>fedora-convert-demos</b> [fromProtocol] [fromHostName] [fromPortNum]
      [toProtocol] [toHostName] [toHostNum] [fedoraHomeDir]</p>
    </blockquote>

    <p>Where:</p>

    <ul>
	<li><b>[fromProtocol]</b> -  currently being used in the demo object files, either<tt> http </tt>or<tt> https</tt>.</li>

      <li><b>[fromHostName]</b> - The hostname currently being used in the demo object files.</li>

      <li><b>[fromPortNum]</b> - The port number currently being used in the demo object files.</li>

      <li><b>[toProtocol]</b> -  the protocol to use for the repository, either<tt> http </tt>or<tt> https</tt>.</li>

      <li><b>[toHostName]</b> - The hostname of the repository.</li>

      <li><b>[toPortNum]</b> - The port number of the repository.</li>

      <li><b>[fedoraHomeDir]</b> - Fedora's install base directory.
      This is the directory that contains the client
      directory.</li>
    </ul>

    <p>Example:</p>

    <blockquote>
      <p><b>fedora-convert-demos http localhost 8080 https www.fedora.info 80 c:\fedora-2.0</b></p>
    </blockquote>

    <p>Converts URLs in the demo objects from one protocol/host/port
    combination to another. After running this script with your
    repository's hostname, the demo objects can successfully be
    ingested.</p>

    <p><em>Background:</em> The demo objects that come with the
    Fedora client have embedded URLs inside them that assume the
    server is running on a machine called localhost on port number
    8080. Those URLs must be changed to reflect the actual host and
    port the server is running on. Rather than search through all
    the demo files and change the references by hand, you can just
    run this script. It is not necessary to run this script if you
    have already run fedora-ingest-demos succcessfully and wish to
    change the hostname and port of the Fedora server, as the demo
    objects are already in the repository and the references inside
    them will automatically be corrected by the server.</p>
  </div>

  <div class="sec1">
    <h2><a name="purge" id="purge"></a>fedora-purge</h2>

    <blockquote>
      <p><b>fedora-purge</b> [hostname] [port-number] [user] [pass]
      [pid] [protocol] [logMessage]</p>
    </blockquote>

    <p>Where:</p>

    <ul>
      <li><b>[hostname]</b> - The hostname of the Fedora server;
      default is localhost.</li>

      <li><b>[port-number]</b> - The port number on which the
      Fedora server is running; default is 8080.</li>

      <li><b>[user]</b> - The Fedora user (e.g. fedoraAdmin).</li>

      <li><b>[pass]</b> - The Fedora user's password.</li>

      <li><b>[pid]</b> - The PID of the object to permanently
      remove.</li>

      <li><b>[protocol]</b> - The protocol to communicate with repository, either<tt> http </tt>or<tt> https</tt>.</li>

      <li><b>[logMessage]</b> - An <em>optional</em> log message explaining the removal.</li>
    </ul>

    <p>Example:</p>

    <blockquote>
      <p><b>fedora-purge localhost 8080 fedoraAdmin fedoraAdmin demo:6 http "It was just a test object"</b></p>
    </blockquote>

    <p>Permanently removes an object from the repository. Note:
    Behavior Definition objects (BDefs) cannot be removed if there
    are objects that depend on them. When removing a BDef from the
    repository, first the dependent object(s) should be removed,
    then the implementing Behavior Mechanism(s), then the BDef
    itself.</p>
  </div>

  <div class="sec1">
    <h2><a name="modify" id="modify"></a>fedora-modify</h2>

    <blockquote>
      <p><b>fedora-modify</b> [hostname:port]  [user]  [password]  [directives-filepath]  [log-filepath] [protocol] [validate-only-option]*</p>
    </blockquote>

    <p>Where:</p>

    <ul>
      <li><b>[host:port]</b> - The hostname and port of the target
      Fedora server.</li>

      <li><b>[user]</b> - The Fedora administrator username (e.g.,
      fedoraAdmin)</li>

      <li><b>[password]</b> - The password for the Fedora
      administrator user.</li>

      <li><b>[directives-filepath]</b> - The full path to the file
      containing the batch modify directives.</li>

      <li><b>[log-filepath]</b> - The full path to the file where
      logs will be written.</li>

      <li><b>[protocol]</b> - The protocol to communicate with repository, 
      either<tt> http </tt>or<tt> https</tt>.</li>

      <li><b>[validate-only-option]</b> - An <em>optional </em> parameter
      indicating whether to only validate the directives file or to
      immediately process the file. The parameter can have any
      non-blank value. If present, the directives file will be
      validated only. If omitted, the directives file will be
      immediately processed.</li>
    </ul>

    <p>The fedora-modify command line utility enables the running
    of the batch modify utility of the Administrator GUI client
    from the command line.</p>
  </div>

  <div class="sec1">
    <h2><a name="bbuild" id="bbuild"></a>fedora-batch-build</h2>

    <blockquote>
      <p><b>fedora-batch-build</b> [object-template-file]  [object-specific-dir]  [object-directory] [log-filepath] [log-format]</p>
    </blockquote>

    <p>Where:</p>

    <ul>
      <li><b>[object-template-file]</b> - The full path to the batch template file.</li>

      <li><b>[obj-specific-dir]</b> - The full path to the directory containing the 
	object-specific files.</li>

      <li><b>[object-directory]</b> - The full path to the directory where the 
	generated objects will be built.</li>

      <li><b>[log-filepath]</b> - The full path to the file where logs will be written.</li>

      <li><b>[log-format]</b> - The format of the log file. Valid values are <tt> text </tt>or<tt> xml</tt>.</li>

    </ul>

    <p>The fedora-batch-build command line utility enables the running of 
       the batch build utility of the Administrator GUI client from the command 
       line. The batch build utility creates a "batch" of Fedora objects based 
       on the specified template file and the corresponding directory of object-specific files. 
       Refer to the documentation on the Batch Utility for more details on how to 
       use the batch build utility.</p>
  </div>

  <div class="sec1">
    <h2><a name="bingest" id="bingest"></a>fedora-batch-ingest</h2>

    <blockquote>
      <p><b>fedora-batch-ingest</b> [object-directory] [log-filepath] [log-format] [host:port] [user] [password] [protocol]</p>
    </blockquote>

    <p>Where:</p>

    <ul>
      <li><b>[obj-directory]</b> - The full path to the directory containing the objects to be ingested.</li>

      <li><b>[log-filepath]</b> - The full path to the file where logs will be written.</li>

      <li><b>[log-format]</b> - The format of the log file. Valid values are <tt> text </tt>or<tt> xml</tt>.</li>

      <li><b>[host:port]</b> - The hostname and port of the target
      Fedora server.</li>

      <li><b>[user]</b> - The Fedora administrator username (e.g.,
      fedoraAdmin)</li>

      <li><b>[password]</b> - The password for the Fedora
      administrator user.</li>

      <li><b>[protocol]</b> - The protocol to communicate with Fedora server, 
      either<tt> http </tt>or<tt> https</tt>.</li>
    </ul>

    <p>The fedora-batch-ingest command line utility enables the running of the 
	batch ingest utility of the Administrator GUI client from the command line. 
	The batch ingest utility ingests a "batch" of Fedora objects from the 
	specified directory into the repository. Refer to the documentation on 
	the Batch Utility for more details on how to use the batch ingest utility.</p>
  </div>

  <div class="sec1">
    <h2><a name="bbdingest" id="bbdingest"></a>fedora-batch-buildingest</h2>

    <blockquote>
      <p><b>fedora-batch-buildingest</b> [object-template-file] [object-specific-dir] [object-directory] [log-filepath] [log-format] [host:port] [user] [password] [protocol]</p>
    </blockquote>

    <p>Where:</p>

    <ul>
      <li><b>[object-template-file]</b> - The full path to the batch template file.</li>

      <li><b>[obj-specific-dir]</b> - The full path to the directory containing the 
	object-specific files.</li>

      <li><b>[object-directory]</b> - The full path to the directory where the 
	generated objects will be built.</li>

      <li><b>[log-filepath]</b> - The full path to the file where logs will be written.</li>

      <li><b>[log-format]</b> - The format of the log file. Valid values are <tt> text </tt>or<tt> xml</tt>.</li>

      <li><b>[host:port]</b> - The hostname and port of the target
      Fedora server.</li>

      <li><b>[user]</b> - The Fedora administrator username (e.g.,
      fedoraAdmin)</li>

      <li><b>[password]</b> - The password for the Fedora
      administrator user.</li>

      <li><b>[protocol]</b> - The protocol to communicate with Fedora server, 
      either<tt> http </tt>or<tt> https</tt>.</li>
    </ul>

    <p>The fedora-batch-buildingest command line utility enables the running of the 
	batch build & ingest utility of the Administrator GUI client from the command 
	line. The batch build & ingest utility creates a "batch" of Fedora objects based 
	on the specified template file and the corresponding directory of object-specific 
	files and then ingests them into the repository. Refer to the documentation on 
	the Batch Utility for more details on how to use the batch build & ingest utility.
	</p>
  </div>

  <div id="footer">
    <div id="copyright">
      Copyright &#xA9; 2005 Fedora Project
    </div>

    <div id="lastModified">
      Last Modified <script type="text/javascript">
      //<![CDATA[
            var cvsDate = "$Date$";
            var parts = cvsDate.split(" ");
            var modifiedDate = parts[1];
            document.write(modifiedDate);
      //]]>
      </script>
    </div>
  </div>
</body>
</html>
